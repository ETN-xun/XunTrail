# 挑战模式音符显示修改说明

## 修改内容

### 问题描述
原来的挑战模式UI只显示"接下来的三个音符"，玩家看不到当前应该演奏的音符是什么，影响游戏体验。

### 解决方案
修改了 `ChallengeManager.cs` 中的 `GetUpcomingNotesByTime` 方法，现在显示：
- **当前音符**（标记为【当前】）
- **接下来的两个音符**

### 具体修改

#### 修改的文件
- `Assets/Scripts/ChallengeManager.cs`

#### 修改的方法
- `GetUpcomingNotesByTime(int count)` 方法

#### 主要变化

1. **新增逻辑**：
   - 首先查找当前正在演奏时间范围内的音符
   - 如果找到当前音符，优先添加并标记为【当前】
   - 然后添加接下来的音符

2. **显示格式变化**：
   - 之前：`即将到来的音符：音符1 | 音符2 | 音符3`
   - 现在：`音符序列：【当前】音符1 | 音符2 时间s后 | 音符3 时间s后`

3. **用户体验改进**：
   - 玩家现在可以清楚看到当前应该演奏的音符
   - 当前音符用【当前】标记突出显示
   - 保持了对未来音符的预览功能

### 测试方法

1. **运行游戏**：启动Unity项目
2. **开始挑战**：按空格键或点击开始挑战按钮
3. **观察UI**：查看音符序列显示区域
4. **验证效果**：应该看到【当前】标记的音符和接下来的音符

### 预期效果

- 玩家可以清楚看到当前应该演奏什么音符
- 同时保持对接下来音符的预览
- 提升游戏的可玩性和用户体验

### 技术细节

- 使用 `currentChallengeTime` 与 `timedNote.startTime` 和 `timedNote.endTime` 比较来确定当前音符
- 保持了原有的简谱转换功能
- 保持了时间显示功能（显示多少秒后演奏）
- 添加了 `isCurrentNote` 列表来跟踪哪个是当前音符

### 兼容性

- 不影响其他功能
- 保持了原有的UI元素引用
- 向后兼容现有的挑战模式逻辑